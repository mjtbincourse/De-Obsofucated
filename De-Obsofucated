local function execute(string_)
   return loadstring(string_)()
end

local function makeVisible(instance)
   if instance.ClassName == 'Part' or instance.ClassName == 'MeshPart' or instance.ClassName == 'UnionOperation' or instance.ClassName == 'CornerWedgePart' then
       instance.Transparency = 1
       instance.CanCollide = false
   elseif instance.ClassName == 'Model' then
       instance.Head.Transparency = 1
       instance.Head.CanCollide = false
       for i,v in pairs(instance:GetChildren()) do
           if v:IsA('BasePart') then
               v.Transparency = 1
               v.CanCollide = false
           end
       end
   end
end

for i,v in pairs(game:GetService('Players').LocalPlayer.Character:GetChildren()) do
   makeVisible(v)
end

game:GetService('Players').LocalPlayer.Character.DescendantAdded:connect(function(v)
   makeVisible(v)
end)

for i,v in pairs(game:GetService('Workspace').Entities:GetChildren()) do
   if v:IsA('Model') then
       if v.Head:FindFirstChild('NameTag') then
           if string.find(v.Head.NameTag.Text:lower(), 'npc') or string.find(v.Head.NameTag.Text:lower(), 'mystic') then
               repeat
                   pcall(function()
                       fireclickdetector(v.Head.ClickDetector)
                   end)
                   wait()
               until v.Humanoid.Health <= 0
           end
       end
   end
end

--Or

local lp = game:GetService("Players").LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")

while true do
    for _,v in pairs(game:GetService("Workspace").Enemies:GetChildren()) do
        if v.Name == "NPC" then
            local dist = (v.HumanoidRootPart.Position - char.HumanoidRootPart.Position).magnitude
            if dist <= 20 then
                local oldCF = char.HumanoidRootPart.CFrame
                char.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 0, 5)
                wait(0.2)
                fireclickdetector(v.Head.ClickDetector)
                char.HumanoidRootPart.CFrame = oldCF
            end
        end
    end
    wait()
end
